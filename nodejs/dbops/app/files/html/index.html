<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>API Methods</title>
</head>

<body>
  <h1>Index Page</h1>
  <p>This is my index page that is very simple.</p>
  <hr>
  <p></p>
  <h1>API Methods</h1>
  <button id="info" onclick="getInfo()">App Info</button>
  <button id="health" onclick="healthCheck()">Health Check</button>
  <button id="orders" onclick="getOrders()">Get Orders in Progress</button>
  <button id="stock" onclick="getStock()">Get Stock</button>
  <button id="customers" onclick="getCustomers()">Get Customers</button>
  <div id="response"></div>

  <script type="text/javascript">
    async function displayResponse(response) {
      const jsonResponse = await response.json();
      const responseContainer = document.getElementById('response');
      responseContainer.innerText = JSON.stringify(jsonResponse, null, 2);
    }

    // These will only work when deployed with helm
    // Or else change the Helm Ingress definition
    async function getInfo() {
      const response = await fetch('/dbapi/info');
      displayResponse(response);
    }

    async function healthCheck() {
      const response = await fetch('/dbapi/healthz');
      displayResponse(response);
    }

    async function getOrders() {
      const response = await fetch('/dbapi/orders');
      displayResponse(response);
    }

    async function getStock() {
      const response = await fetch('/dbapi/stock');
      displayResponse(response);
    }

    async function getCustomers() {
      const response = await fetch('/dbapi/customers');
      displayResponse(response);
    }
  </script>

</body>

</html>